results_layer_prune = {0.1: {'average_flops_pruned': 121982159656.96,
  'average_flops_ref': 137221822156.8,
  'average_time_pruned': 1.0711402010917663,
  'average_time_ref': 1.376973145008087,
  'average_rouge_pruned': {'rouge1': 0.4182168540942135,
   'rouge2': 0.18461451158561681,
   'rougeL': 0.2833980992275022,
   'rougeLsum': 0.34995836974110783},
  'average_rouge_ref': {'rouge1': 0.41425834811581425,
   'rouge2': 0.18859044332934705,
   'rougeL': 0.27937080844937434,
   'rougeLsum': 0.3495267949878762},
  'average_bleu_pruned': {'bleu': 0.1345725951304596,
   'precisions': [0.3780058651026393,
    0.16354166666666667,
    0.09199395770392749,
    0.05766871165644172],
   'brevity_penalty': 1.0,
   'length_ratio': 1.2695457930007445,
   'translation_length': 6820,
   'reference_length': 5372},
  'average_bleu_ref': {'bleu': 0.12994626205808327,
   'precisions': [0.36112979152656355,
    0.156373551465576,
    0.08873531444367658,
    0.05690259285213735],
   'brevity_penalty': 1.0,
   'length_ratio': 1.3840282948622487,
   'translation_length': 7435,
   'reference_length': 5372}},
 0.2: {'average_flops_pruned': 106494068889.6,
  'average_flops_ref': 125898794588.16,
  'average_time_pruned': 1.0080876016616822,
  'average_time_ref': 1.2609508395195008,
  'average_rouge_pruned': {'rouge1': 0.398897039115952,
   'rouge2': 0.15710398281679094,
   'rougeL': 0.2653091859133988,
   'rougeLsum': 0.33150865660806833},
  'average_rouge_ref': {'rouge1': 0.41425834811581425,
   'rouge2': 0.18859044332934705,
   'rougeL': 0.27937080844937434,
   'rougeLsum': 0.3495267949878762},
  'average_bleu_pruned': {'bleu': 0.11413373312122418,
   'precisions': [0.37538461538461537,
    0.1446875,
    0.07507936507936508,
    0.04161290322580645],
   'brevity_penalty': 1.0,
   'length_ratio': 1.2099776619508562,
   'translation_length': 6500,
   'reference_length': 5372},
  'average_bleu_ref': {'bleu': 0.12994626205808327,
   'precisions': [0.36112979152656355,
    0.156373551465576,
    0.08873531444367658,
    0.05690259285213735],
   'brevity_penalty': 1.0,
   'length_ratio': 1.3840282948622487,
   'translation_length': 7435,
   'reference_length': 5372}},
 0.3: {'average_flops_pruned': 93043195811.84,
  'average_flops_ref': 125898794588.16,
  'average_time_pruned': 0.9326514101028442,
  'average_time_ref': 1.253011531829834,
  'average_rouge_pruned': {'rouge1': 0.37369111722415105,
   'rouge2': 0.12867309034720995,
   'rougeL': 0.24723434284206175,
   'rougeLsum': 0.31243958857246135},
  'average_rouge_ref': {'rouge1': 0.41425834811581425,
   'rouge2': 0.18859044332934705,
   'rougeL': 0.27937080844937434,
   'rougeLsum': 0.3495267949878762},
  'average_bleu_pruned': {'bleu': 0.09246971492712168,
   'precisions': [0.36550710436060757,
    0.12369251203719077,
    0.056052676008779334,
    0.028851107676455434],
   'brevity_penalty': 1.0,
   'length_ratio': 1.1397989575577065,
   'translation_length': 6123,
   'reference_length': 5372},
  'average_bleu_ref': {'bleu': 0.12994626205808327,
   'precisions': [0.36112979152656355,
    0.156373551465576,
    0.08873531444367658,
    0.05690259285213735],
   'brevity_penalty': 1.0,
   'length_ratio': 1.3840282948622487,
   'translation_length': 7435,
   'reference_length': 5372}},
 0.4: {'average_flops_pruned': 81379799767.04,
  'average_flops_ref': 125898794588.16,
  'average_time_pruned': 0.8796977829933167,
  'average_time_ref': 1.2503673315048218,
  'average_rouge_pruned': {'rouge1': 0.3419301587291808,
   'rouge2': 0.10223108070972972,
   'rougeL': 0.2211665991689351,
   'rougeLsum': 0.2799365360427141},
  'average_rouge_ref': {'rouge1': 0.41425834811581425,
   'rouge2': 0.18859044332934705,
   'rougeL': 0.27937080844937434,
   'rougeLsum': 0.3495267949878762},
  'average_bleu_pruned': {'bleu': 0.07163820581744712,
   'precisions': [0.3452663725822871,
    0.1011391094235416,
    0.04056902002107481,
    0.018591347872720772],
   'brevity_penalty': 1.0,
   'length_ratio': 1.0971705137751302,
   'translation_length': 5894,
   'reference_length': 5372},
  'average_bleu_ref': {'bleu': 0.12994626205808327,
   'precisions': [0.36112979152656355,
    0.156373551465576,
    0.08873531444367658,
    0.05690259285213735],
   'brevity_penalty': 1.0,
   'length_ratio': 1.3840282948622487,
   'translation_length': 7435,
   'reference_length': 5372}},
 0.5: {'average_flops_pruned': 71389093468.16,
  'average_flops_ref': 125898794588.16,
  'average_time_pruned': 0.8498828649520874,
  'average_time_ref': 1.2474299836158753,
  'average_rouge_pruned': {'rouge1': 0.31728467784271086,
   'rouge2': 0.08510916327062074,
   'rougeL': 0.20645472269103826,
   'rougeLsum': 0.26268001251513173},
  'average_rouge_ref': {'rouge1': 0.41425834811581425,
   'rouge2': 0.18859044332934705,
   'rougeL': 0.27937080844937434,
   'rougeLsum': 0.3495267949878762},
  'average_bleu_pruned': {'bleu': 0.05841943863244009,
   'precisions': [0.32820069204152247,
    0.08538732394366197,
    0.03207885304659498,
    0.012956204379562044],
   'brevity_penalty': 1.0,
   'length_ratio': 1.0759493670886076,
   'translation_length': 5780,
   'reference_length': 5372},
  'average_bleu_ref': {'bleu': 0.12994626205808327,
   'precisions': [0.36112979152656355,
    0.156373551465576,
    0.08873531444367658,
    0.05690259285213735],
   'brevity_penalty': 1.0,
   'length_ratio': 1.3840282948622487,
   'translation_length': 7435,
   'reference_length': 5372}},
 0.6: {'average_flops_pruned': 62921241139.2,
  'average_flops_ref': 125898794588.16,
  'average_time_pruned': 0.8394272756576538,
  'average_time_ref': 1.2412140274047851,
  'average_rouge_pruned': {'rouge1': 0.25660505688456775,
   'rouge2': 0.0510464860698495,
   'rougeL': 0.1681390900185309,
   'rougeLsum': 0.21731290381241858},
  'average_rouge_ref': {'rouge1': 0.41425834811581425,
   'rouge2': 0.18859044332934705,
   'rougeL': 0.27937080844937434,
   'rougeLsum': 0.3495267949878762},
  'average_bleu_pruned': {'bleu': 0.03155241827398107,
   'precisions': [0.2783469352318111,
    0.052659480473581904,
    0.013671523655333693,
    0.004945960798681077],
   'brevity_penalty': 1.0,
   'length_ratio': 1.0720402084884586,
   'translation_length': 5759,
   'reference_length': 5372},
  'average_bleu_ref': {'bleu': 0.12994626205808327,
   'precisions': [0.36112979152656355,
    0.156373551465576,
    0.08873531444367658,
    0.05690259285213735],
   'brevity_penalty': 1.0,
   'length_ratio': 1.3840282948622487,
   'translation_length': 7435,
   'reference_length': 5372}},
 0.7: {'average_flops_pruned': 55761348597.76,
  'average_flops_ref': 125898794588.16,
  'average_time_pruned': 0.878724205493927,
  'average_time_ref': 1.2431861543655396,
  'average_rouge_pruned': {'rouge1': 0.13715545604546303,
   'rouge2': 0.009666747655451243,
   'rougeL': 0.10214602347967884,
   'rougeLsum': 0.12527620240044973},
  'average_rouge_ref': {'rouge1': 0.41425834811581425,
   'rouge2': 0.18859044332934705,
   'rougeL': 0.27937080844937434,
   'rougeLsum': 0.3495267949878762},
  'average_bleu_pruned': {'bleu': 0.0,
   'precisions': [0.17862838915470494,
    0.011365686451380119,
    0.001102333272092596,
    0.0],
   'brevity_penalty': 1.0,
   'length_ratio': 1.0504467609828743,
   'translation_length': 5643,
   'reference_length': 5372},
  'average_bleu_ref': {'bleu': 0.12994626205808327,
   'precisions': [0.36112979152656355,
    0.156373551465576,
    0.08873531444367658,
    0.05690259285213735],
   'brevity_penalty': 1.0,
   'length_ratio': 1.3840282948622487,
   'translation_length': 7435,
   'reference_length': 5372}}}


results_layer_merge_keep_anchor = {0.1: {'average_flops_pruned': 135685306357.76,
  'average_flops_ref': 125898794588.16,
  'average_time_pruned': 1.5420283365249634,
  'average_time_ref': 1.381700372695923,
  'average_rouge_pruned': {'rouge1': 0.42315634186415774,
   'rouge2': 0.19617889178211156,
   'rougeL': 0.28967391866832093,
   'rougeLsum': 0.3594699304078539},
  'average_rouge_ref': {'rouge1': 0.41425834811581425,
   'rouge2': 0.18859044332934705,
   'rougeL': 0.27937080844937434,
   'rougeLsum': 0.3495267949878762},
  'average_bleu_pruned': {'bleu': 0.13771007453318232,
   'precisions': [0.37390579408086705,
    0.16669015076793012,
    0.09475489495498071,
    0.060896041757285774],
   'brevity_penalty': 1.0,
   'length_ratio': 1.3397244973938942,
   'translation_length': 7197,
   'reference_length': 5372},
  'average_bleu_ref': {'bleu': 0.12994626205808327,
   'precisions': [0.36112979152656355,
    0.156373551465576,
    0.08873531444367658,
    0.05690259285213735],
   'brevity_penalty': 1.0,
   'length_ratio': 1.3840282948622487,
   'translation_length': 7435,
   'reference_length': 5372}},
 0.2: {'average_flops_pruned': 128111469107.2,
  'average_flops_ref': 125898794588.16,
  'average_time_pruned': 1.4516769123077393,
  'average_time_ref': 1.3932109665870667,
  'average_rouge_pruned': {'rouge1': 0.4057162570320646,
   'rouge2': 0.17294585583761785,
   'rougeL': 0.2728843428623607,
   'rougeLsum': 0.34098695280752894},
  'average_rouge_ref': {'rouge1': 0.41425834811581425,
   'rouge2': 0.18859044332934705,
   'rougeL': 0.27937080844937434,
   'rougeLsum': 0.3495267949878762},
  'average_bleu_pruned': {'bleu': 0.11944112542906327,
   'precisions': [0.37059769107116763,
    0.1512679816105591,
    0.07918109287972301,
    0.04585052728106373],
   'brevity_penalty': 1.0,
   'length_ratio': 1.2738272524199554,
   'translation_length': 6843,
   'reference_length': 5372},
  'average_bleu_ref': {'bleu': 0.12994626205808327,
   'precisions': [0.36112979152656355,
    0.156373551465576,
    0.08873531444367658,
    0.05690259285213735],
   'brevity_penalty': 1.0,
   'length_ratio': 1.3840282948622487,
   'translation_length': 7435,
   'reference_length': 5372}},
 0.3: {'average_flops_pruned': 118258627614.72,
  'average_flops_ref': 125898794588.16,
  'average_time_pruned': 1.3207200789451599,
  'average_time_ref': 1.37888507604599,
  'average_rouge_pruned': {'rouge1': 0.40589649275808537,
   'rouge2': 0.16473363062909127,
   'rougeL': 0.26905621460118595,
   'rougeLsum': 0.3385011059791576},
  'average_rouge_ref': {'rouge1': 0.41425834811581425,
   'rouge2': 0.18859044332934705,
   'rougeL': 0.27937080844937434,
   'rougeLsum': 0.3495267949878762},
  'average_bleu_pruned': {'bleu': 0.11735602325798883,
   'precisions': [0.38280144631347274,
    0.15221210669222168,
    0.07677325109560136,
    0.04240224385414948],
   'brevity_penalty': 1.0,
   'length_ratio': 1.184102755026061,
   'translation_length': 6361,
   'reference_length': 5372},
  'average_bleu_ref': {'bleu': 0.12994626205808327,
   'precisions': [0.36112979152656355,
    0.156373551465576,
    0.08873531444367658,
    0.05690259285213735],
   'brevity_penalty': 1.0,
   'length_ratio': 1.3840282948622487,
   'translation_length': 7435,
   'reference_length': 5372}},
 0.4: {'average_flops_pruned': 107019167733.76,
  'average_flops_ref': 125898794588.16,
  'average_time_pruned': 1.240582182407379,
  'average_time_ref': 1.376947250366211,
  'average_rouge_pruned': {'rouge1': 0.3969335320327565,
   'rouge2': 0.14833301392092302,
   'rougeL': 0.25735716882394577,
   'rougeLsum': 0.3328607873472554},
  'average_rouge_ref': {'rouge1': 0.41425834811581425,
   'rouge2': 0.18859044332934705,
   'rougeL': 0.27937080844937434,
   'rougeLsum': 0.3495267949878762},
  'average_bleu_pruned': {'bleu': 0.10506611069911113,
   'precisions': [0.38323643410852715,
    0.1406762967826658,
    0.06692256341789052,
    0.033774609640190086],
   'brevity_penalty': 1.0,
   'length_ratio': 1.1526433358153387,
   'translation_length': 6192,
   'reference_length': 5372},
  'average_bleu_ref': {'bleu': 0.12994626205808327,
   'precisions': [0.36112979152656355,
    0.156373551465576,
    0.08873531444367658,
    0.05690259285213735],
   'brevity_penalty': 1.0,
   'length_ratio': 1.3840282948622487,
   'translation_length': 7435,
   'reference_length': 5372}},
 0.5: {'average_flops_pruned': 94744410101.76,
  'average_flops_ref': 125898794588.16,
  'average_time_pruned': 1.1597185468673705,
  'average_time_ref': 1.380140359401703,
  'average_rouge_pruned': {'rouge1': 0.37282952243228606,
   'rouge2': 0.12126701084375696,
   'rougeL': 0.23632129213329672,
   'rougeLsum': 0.30419607500052664},
  'average_rouge_ref': {'rouge1': 0.41425834811581425,
   'rouge2': 0.18859044332934705,
   'rougeL': 0.27937080844937434,
   'rougeLsum': 0.3495267949878762},
  'average_bleu_pruned': {'bleu': 0.08558674210853946,
   'precisions': [0.3687813021702838,
    0.11850594227504245,
    0.050259067357512954,
    0.024428822495606326],
   'brevity_penalty': 1.0,
   'length_ratio': 1.1150409530900969,
   'translation_length': 5990,
   'reference_length': 5372},
  'average_bleu_ref': {'bleu': 0.12994626205808327,
   'precisions': [0.36112979152656355,
    0.156373551465576,
    0.08873531444367658,
    0.05690259285213735],
   'brevity_penalty': 1.0,
   'length_ratio': 1.3840282948622487,
   'translation_length': 7435,
   'reference_length': 5372}},
 0.6: {'average_flops_pruned': 82331328419.84,
  'average_flops_ref': 125898794588.16,
  'average_time_pruned': 1.063960680961609,
  'average_time_ref': 1.3770780277252197,
  'average_rouge_pruned': {'rouge1': 0.3302854521022135,
   'rouge2': 0.0990328371218991,
   'rougeL': 0.21815476724089045,
   'rougeLsum': 0.2747643206965173},
  'average_rouge_ref': {'rouge1': 0.41425834811581425,
   'rouge2': 0.18859044332934705,
   'rougeL': 0.27937080844937434,
   'rougeLsum': 0.3495267949878762},
  'average_bleu_pruned': {'bleu': 0.06696339125885688,
   'precisions': [0.3442419954006722,
    0.09814514676751306,
    0.03704382908490739,
    0.01606575751914814],
   'brevity_penalty': 1.0,
   'length_ratio': 1.0523082650781832,
   'translation_length': 5653,
   'reference_length': 5372},
  'average_bleu_ref': {'bleu': 0.12994626205808327,
   'precisions': [0.36112979152656355,
    0.156373551465576,
    0.08873531444367658,
    0.05690259285213735],
   'brevity_penalty': 1.0,
   'length_ratio': 1.3840282948622487,
   'translation_length': 7435,
   'reference_length': 5372}},
 0.7: {'average_flops_pruned': 70092862330.88,
  'average_flops_ref': 125898794588.16,
  'average_time_pruned': 1.0361483311653137,
  'average_time_ref': 1.376973145008087,
  'average_rouge_pruned': {'rouge1': 0.26272174892201305,
   'rouge2': 0.058047968551373744,
   'rougeL': 0.17149576784703474,
   'rougeLsum': 0.2252657300784462},
  'average_rouge_ref': {'rouge1': 0.41425834811581425,
   'rouge2': 0.18859044332934705,
   'rougeL': 0.27937080844937434,
   'rougeLsum': 0.3495267949878762},
  'average_bleu_pruned': {'bleu': 0.03512063483823459,
   'precisions': [0.28345773303245964,
    0.059706765589118534,
    0.01636396331595037,
    0.005493499359091741],
   'brevity_penalty': 1.0,
   'length_ratio': 1.0724125093075205,
   'translation_length': 5761,
   'reference_length': 5372},
  'average_bleu_ref': {'bleu': 0.12994626205808327,
   'precisions': [0.36112979152656355,
    0.156373551465576,
    0.08873531444367658,
    0.05690259285213735],
   'brevity_penalty': 1.0,
   'length_ratio': 1.3840282948622487,
   'translation_length': 7435,
   'reference_length': 5372}}}

results_layer_num = {1: {'average_flops_pruned': 150911232675.84,
  'average_flops_ref': 137221822156.8,
  'average_time_pruned': 1.3146504402160644,
  'average_time_ref': 1.3304894423484803,
  'average_rouge_pruned': {'rouge1': 0.4292865128525831,
   'rouge2': 0.20239215538907368,
   'rougeL': 0.2956929888723395,
   'rougeLsum': 0.3608743941696656},
  'average_rouge_ref': {'rouge1': 0.43149688133968445,
   'rouge2': 0.2075211088277723,
   'rougeL': 0.3020403824290508,
   'rougeLsum': 0.36434375468186375},
  'average_bleu_pruned': {'bleu': 0.15137500806204637,
   'precisions': [0.3945004083855159,
    0.17871929340325696,
    0.10579345088161209,
    0.07039455009934714],
   'brevity_penalty': 1.0,
   'length_ratio': 1.2600343053173242,
   'translation_length': 7346,
   'reference_length': 5830},
  'average_bleu_ref': {'bleu': 0.15677784102722245,
   'precisions': [0.38646401662769553,
    0.1807054488023164,
    0.11149639903974393,
    0.07758853744255204],
   'brevity_penalty': 1.0,
   'length_ratio': 1.3204116638078902,
   'translation_length': 7698,
   'reference_length': 5830}},
 2: {'average_flops_pruned': 141150341468.16,
  'average_flops_ref': 137221822156.8,
  'average_time_pruned': 1.3065886855125428,
  'average_time_ref': 1.3469559574127197,
  'average_rouge_pruned': {'rouge1': 0.4272583598597568,
   'rouge2': 0.19308663142108595,
   'rougeL': 0.2943177932114005,
   'rougeLsum': 0.3572427513959353},
  'average_rouge_ref': {'rouge1': 0.43149688133968445,
   'rouge2': 0.2075211088277723,
   'rougeL': 0.3020403824290508,
   'rougeLsum': 0.36434375468186375},
  'average_bleu_pruned': {'bleu': 0.15024518882545285,
   'precisions': [0.40468660149511215,
    0.1778004667444574,
    0.10405565423327413,
    0.06805889423076923],
   'brevity_penalty': 1.0,
   'length_ratio': 1.193138936535163,
   'translation_length': 6956,
   'reference_length': 5830},
  'average_bleu_ref': {'bleu': 0.15677784102722245,
   'precisions': [0.38646401662769553,
    0.1807054488023164,
    0.11149639903974393,
    0.07758853744255204],
   'brevity_penalty': 1.0,
   'length_ratio': 1.3204116638078902,
   'translation_length': 7698,
   'reference_length': 5830}},
 3: {'average_flops_pruned': 129854456401.92,
  'average_flops_ref': 137221822156.8,
  'average_time_pruned': 1.2560935640335082,
  'average_time_ref': 1.340048360824585,
  'average_rouge_pruned': {'rouge1': 0.4204975235420857,
   'rouge2': 0.1764442918210383,
   'rougeL': 0.2821532267281659,
   'rougeLsum': 0.347979905711687},
  'average_rouge_ref': {'rouge1': 0.43149688133968445,
   'rouge2': 0.2075211088277723,
   'rougeL': 0.3020403824290508,
   'rougeLsum': 0.36434375468186375},
  'average_bleu_pruned': {'bleu': 0.13675681351033941,
   'precisions': [0.40708626102556433,
    0.16330247382000304,
    0.09184774233317923,
    0.05728596024416967],
   'brevity_penalty': 1.0,
   'length_ratio': 1.1473413379073756,
   'translation_length': 6689,
   'reference_length': 5830},
  'average_bleu_ref': {'bleu': 0.15677784102722245,
   'precisions': [0.38646401662769553,
    0.1807054488023164,
    0.11149639903974393,
    0.07758853744255204],
   'brevity_penalty': 1.0,
   'length_ratio': 1.3204116638078902,
   'translation_length': 7698,
   'reference_length': 5830}},
 4: {'average_flops_pruned': 122008681697.28,
  'average_flops_ref': 137221822156.8,
  'average_time_pruned': 1.2452746033668518,
  'average_time_ref': 1.3341246438026428,
  'average_rouge_pruned': {'rouge1': 0.4159882230271205,
   'rouge2': 0.1766554202883792,
   'rougeL': 0.28862215952210846,
   'rougeLsum': 0.3483703160209769},
  'average_rouge_ref': {'rouge1': 0.43149688133968445,
   'rouge2': 0.2075211088277723,
   'rougeL': 0.3020403824290508,
   'rougeLsum': 0.36434375468186375},
  'average_bleu_pruned': {'bleu': 0.13432234009661037,
   'precisions': [0.4037695372356727,
    0.16433239962651727,
    0.09010433133101486,
    0.05444908448442017],
   'brevity_penalty': 1.0,
   'length_ratio': 1.1193825042881647,
   'translation_length': 6526,
   'reference_length': 5830},
  'average_bleu_ref': {'bleu': 0.15677784102722245,
   'precisions': [0.38646401662769553,
    0.1807054488023164,
    0.11149639903974393,
    0.07758853744255204],
   'brevity_penalty': 1.0,
   'length_ratio': 1.3204116638078902,
   'translation_length': 7698,
   'reference_length': 5830}},
 6: {'average_flops_pruned': 106910850027.52,
  'average_flops_ref': 137221822156.8,
  'average_time_pruned': 1.2464939069747925,
  'average_time_ref': 1.3333692955970764,
  'average_rouge_pruned': {'rouge1': 0.3720549453364054,
   'rouge2': 0.13463420779919028,
   'rougeL': 0.24888341863066082,
   'rougeLsum': 0.3036129991668469},
  'average_rouge_ref': {'rouge1': 0.43149688133968445,
   'rouge2': 0.2075211088277723,
   'rougeL': 0.3020403824290508,
   'rougeLsum': 0.36434375468186375},
  'average_bleu_pruned': {'bleu': 0.10076843598732615,
   'precisions': [0.37529210157345383,
    0.1305586326950467,
    0.061907059012703006,
    0.033992482431769895],
   'brevity_penalty': 1.0,
   'length_ratio': 1.1010291595197255,
   'translation_length': 6419,
   'reference_length': 5830},
  'average_bleu_ref': {'bleu': 0.15677784102722245,
   'precisions': [0.38646401662769553,
    0.1807054488023164,
    0.11149639903974393,
    0.07758853744255204],
   'brevity_penalty': 1.0,
   'length_ratio': 1.3204116638078902,
   'translation_length': 7698,
   'reference_length': 5830}},
 12: {'average_flops_pruned': 74209409576.96,
  'average_flops_ref': 137221822156.8,
  'average_time_pruned': 1.2536646628379822,
  'average_time_ref': 1.3345760607719421,
  'average_rouge_pruned': {'rouge1': 0.3244462246064667,
   'rouge2': 0.10093119063654182,
   'rougeL': 0.2181174257368091,
   'rougeLsum': 0.27048391369603225},
  'average_rouge_ref': {'rouge1': 0.43149688133968445,
   'rouge2': 0.2075211088277723,
   'rougeL': 0.3020403824290508,
   'rougeLsum': 0.36434375468186375},
  'average_bleu_pruned': {'bleu': 0.07018162832492099,
   'precisions': [0.3482066243349923,
    0.10284616727780688,
    0.041229784965345656,
    0.016464628188890898],
   'brevity_penalty': 0.999485287821266,
   'length_ratio': 0.9994854202401372,
   'translation_length': 5827,
   'reference_length': 5830},
  'average_bleu_ref': {'bleu': 0.15677784102722245,
   'precisions': [0.38646401662769553,
    0.1807054488023164,
    0.11149639903974393,
    0.07758853744255204],
   'brevity_penalty': 1.0,
   'length_ratio': 1.3204116638078902,
   'translation_length': 7698,
   'reference_length': 5830}}}

results_layer_merge_weights = {0: {'average_flops_pruned': 101627642941.44, 'average_flops_ref': 137221822156.8, 'average_time_pruned': 1.0801796007156372, 'average_time_ref': 1.2397479581832886, 'average_rouge_pruned': {'rouge1': 0.38562778272873344, 'rouge2': 0.14618025641874774, 'rougeL': 0.2651196489989457, 'rougeLsum': 0.32481234342220455}, 'average_rouge_ref': {'rouge1': 0.41425834811581425, 'rouge2': 0.18859044332934705, 'rougeL': 0.27937080844937434, 'rougeLsum': 0.3495267949878762}, 'average_bleu_pruned': {'bleu': 0.11127069846946658, 'precisions': [0.38475177304964536, 0.14154652686762778, 0.0701199200532978, 0.04014227642276423], 'brevity_penalty': 1.0, 'length_ratio': 1.1156266858478692, 'translation_length': 6204, 'reference_length': 5561}, 'average_bleu_ref': {'bleu': 0.18069428516146216, 'precisions': [0.40404040404040403, 0.2045051194539249, 0.13245674740484428, 0.09740350877192983], 'brevity_penalty': 1.0, 'length_ratio': 1.3351915123179283, 'translation_length': 7425, 'reference_length': 5561}}, 0.2: {'average_flops_pruned': 101627642941.44, 'average_flops_ref': 136742316707.84, 'average_time_pruned': 1.2000478863716126, 'average_time_ref': 1.2488332676887512, 'average_rouge_pruned': {'rouge1': 0.38637572504667106, 'rouge2': 0.14646142722449348, 'rougeL': 0.26734617868673105, 'rougeLsum': 0.3255599323320927}, 'average_rouge_ref': {'rouge1': 0.41425834811581425, 'rouge2': 0.18859044332934705, 'rougeL': 0.27937080844937434, 'rougeLsum': 0.3495267949878762}, 'average_bleu_pruned': {'bleu': 0.11286561371741681, 'precisions': [0.387532981530343, 0.14218645204560698, 0.07162346521145975, 0.04111727966689799], 'brevity_penalty': 1.0, 'length_ratio': 1.0904513576694839, 'translation_length': 6064, 'reference_length': 5561}, 'average_bleu_ref': {'bleu': 0.18069428516146216, 'precisions': [0.40404040404040403, 0.2045051194539249, 0.13245674740484428, 0.09740350877192983], 'brevity_penalty': 1.0, 'length_ratio': 1.3351915123179283, 'translation_length': 7425, 'reference_length': 5561}}, 0.4: {'average_flops_pruned': 101627642941.44, 'average_flops_ref': 136742316707.84, 'average_time_pruned': 1.1994796705245971, 'average_time_ref': 1.2615397238731385, 'average_rouge_pruned': {'rouge1': 0.39796994723315693, 'rouge2': 0.15538868302901954, 'rougeL': 0.2659808848861439, 'rougeLsum': 0.3287361910406275}, 'average_rouge_ref': {'rouge1': 0.41425834811581425, 'rouge2': 0.18859044332934705, 'rougeL': 0.27937080844937434, 'rougeLsum': 0.3495267949878762}, 'average_bleu_pruned': {'bleu': 0.12154147057533303, 'precisions': [0.3974484789008832, 0.1521449950116395, 0.07828880622252282, 0.04609563123495012], 'brevity_penalty': 1.0, 'length_ratio': 1.0994425463046216, 'translation_length': 6114, 'reference_length': 5561}, 'average_bleu_ref': {'bleu': 0.18069428516146216, 'precisions': [0.40404040404040403, 0.2045051194539249, 0.13245674740484428, 0.09740350877192983], 'brevity_penalty': 1.0, 'length_ratio': 1.3351915123179283, 'translation_length': 7425, 'reference_length': 5561}}, 0.6: {'average_flops_pruned': 101627642941.44, 'average_flops_ref': 136742316707.84, 'average_time_pruned': 1.2320221710205077, 'average_time_ref': 1.265856111049652, 'average_rouge_pruned': {'rouge1': 0.40260128381875926, 'rouge2': 0.15763856818082, 'rougeL': 0.2775238941307049, 'rougeLsum': 0.33731089903734357}, 'average_rouge_ref': {'rouge1': 0.41425834811581425, 'rouge2': 0.18859044332934705, 'rougeL': 0.27937080844937434, 'rougeLsum': 0.3495267949878762}, 'average_bleu_pruned': {'bleu': 0.11760382799415178, 'precisions': [0.396488427773344, 0.15036496350364964, 0.07535037098103875, 0.04258172673931266], 'brevity_penalty': 1.0, 'length_ratio': 1.1265959359827369, 'translation_length': 6265, 'reference_length': 5561}, 'average_bleu_ref': {'bleu': 0.18069428516146216, 'precisions': [0.40404040404040403, 0.2045051194539249, 0.13245674740484428, 0.09740350877192983], 'brevity_penalty': 1.0, 'length_ratio': 1.3351915123179283, 'translation_length': 7425, 'reference_length': 5561}}, 0.8: {'average_flops_pruned': 101627642941.44, 'average_flops_ref': 136742316707.84, 'average_time_pruned': 1.224426681995392, 'average_time_ref': 1.263013653755188, 'average_rouge_pruned': {'rouge1': 0.4074738691940289, 'rouge2': 0.17079335141254726, 'rougeL': 0.2788188122092015, 'rougeLsum': 0.3441589478714576}, 'average_rouge_ref': {'rouge1': 0.41425834811581425, 'rouge2': 0.18859044332934705, 'rougeL': 0.27937080844937434, 'rougeLsum': 0.3495267949878762}, 'average_bleu_pruned': {'bleu': 0.12784090247723293, 'precisions': [0.40131790421086466, 0.16073178699771318, 0.08369312520757223, 0.04947652819993246], 'brevity_penalty': 1.0, 'length_ratio': 1.1188635137565186, 'translation_length': 6222, 'reference_length': 5561}, 'average_bleu_ref': {'bleu': 0.18069428516146216, 'precisions': [0.40404040404040403, 0.2045051194539249, 0.13245674740484428, 0.09740350877192983], 'brevity_penalty': 1.0, 'length_ratio': 1.3351915123179283, 'translation_length': 7425, 'reference_length': 5561}}, 1: {'average_flops_pruned': 101627642941.44, 'average_flops_ref': 136742316707.84, 'average_time_pruned': 1.224071617126465, 'average_time_ref': 1.2615681648254395, 'average_rouge_pruned': {'rouge1': 0.40410869323686055, 'rouge2': 0.1678071373543824, 'rougeL': 0.27637466469793, 'rougeLsum': 0.34143945464623715}, 'average_rouge_ref': {'rouge1': 0.41425834811581425, 'rouge2': 0.18859044332934705, 'rougeL': 0.27937080844937434, 'rougeLsum': 0.3495267949878762}, 'average_bleu_pruned': {'bleu': 0.13188706988477722, 'precisions': [0.3972007722007722, 0.1605624591236102, 0.08743351063829788, 0.05425963488843814], 'brevity_penalty': 1.0, 'length_ratio': 1.117784571120302, 'translation_length': 6216, 'reference_length': 5561}, 'average_bleu_ref': {'bleu': 0.18069428516146216, 'precisions': [0.40404040404040403, 0.2045051194539249, 0.13245674740484428, 0.09740350877192983], 'brevity_penalty': 1.0, 'length_ratio': 1.3351915123179283, 'translation_length': 7425, 'reference_length': 5561}}}

temp_scaling_test = {'temp 0.2': {'average_flops_pruned': 83727006586.88, 'average_flops_ref': 129100198615.04, 'average_time_pruned': 1.2262133860588074, 'average_time_ref': 1.5154845523834228, 'average_rouge_pruned': {'rouge1': 0.37392314692433215, 'rouge2': 0.12051555078010587, 'rougeL': 0.24061810684219473, 'rougeLsum': 0.3041732311883909}, 'average_rouge_ref': {'rouge1': 0.41858149947701984, 'rouge2': 0.19592063246471425, 'rougeL': 0.2939798241481364, 'rougeLsum': 0.35365387150961747}, 'average_bleu_pruned': {'bleu': 0.09388592223902621, 'precisions': [0.3878663940013633, 0.12742718446601942, 0.05575158786167961, 0.02819683908045977], 'brevity_penalty': 1.0, 'length_ratio': 1.0400567174760724, 'translation_length': 5868, 'reference_length': 5642}, 'average_bleu_ref': {'bleu': 0.15434915398574175, 'precisions': [0.3787956767884714, 0.1750521376433785, 0.1089540412044374, 0.07855995717344753], 'brevity_penalty': 1.0, 'length_ratio': 1.3775257001063452, 'translation_length': 7772, 'reference_length': 5642}}, 'temp 0.4': {'average_flops_pruned': 83727006586.88, 'average_flops_ref': 129100198615.04, 'average_time_pruned': 1.2218461799621583, 'average_time_ref': 1.5168952012062074, 'average_rouge_pruned': {'rouge1': 0.36537423561666865, 'rouge2': 0.11909848007142852, 'rougeL': 0.23650881912255461, 'rougeLsum': 0.30037004043975524}, 'average_rouge_ref': {'rouge1': 0.41858149947701984, 'rouge2': 0.19592063246471425, 'rougeL': 0.2939798241481364, 'rougeLsum': 0.35365387150961747}, 'average_bleu_pruned': {'bleu': 0.08831756588682019, 'precisions': [0.3801906058543227, 0.12413434903047091, 0.052854122621564484, 0.024390243902439025], 'brevity_penalty': 1.0, 'length_ratio': 1.0414746543778801, 'translation_length': 5876, 'reference_length': 5642}, 'average_bleu_ref': {'bleu': 0.15434915398574175, 'precisions': [0.3787956767884714, 0.1750521376433785, 0.1089540412044374, 0.07855995717344753], 'brevity_penalty': 1.0, 'length_ratio': 1.3775257001063452, 'translation_length': 7772, 'reference_length': 5642}}, 'temp 0.6': {'average_flops_pruned': 83727006586.88, 'average_flops_ref': 129100198615.04, 'average_time_pruned': 1.2159048342704772, 'average_time_ref': 1.5081881141662599, 'average_rouge_pruned': {'rouge1': 0.37167320916083413, 'rouge2': 0.12246977828710576, 'rougeL': 0.23961688447338841, 'rougeLsum': 0.30688751849672813}, 'average_rouge_ref': {'rouge1': 0.41858149947701984, 'rouge2': 0.19592063246471425, 'rougeL': 0.2939798241481364, 'rougeLsum': 0.35365387150961747}, 'average_bleu_pruned': {'bleu': 0.09188686801554202, 'precisions': [0.3825136612021858, 0.12769284225156358, 0.055162659123055166, 0.026457883369330453], 'brevity_penalty': 1.0, 'length_ratio': 1.0379298121233604, 'translation_length': 5856, 'reference_length': 5642}, 'average_bleu_ref': {'bleu': 0.15434915398574175, 'precisions': [0.3787956767884714, 0.1750521376433785, 0.1089540412044374, 0.07855995717344753], 'brevity_penalty': 1.0, 'length_ratio': 1.3775257001063452, 'translation_length': 7772, 'reference_length': 5642}}, 'temp 0.8': {'average_flops_pruned': 83727006586.88, 'average_flops_ref': 129100198615.04, 'average_time_pruned': 1.244049301147461, 'average_time_ref': 1.5162114429473876, 'average_rouge_pruned': {'rouge1': 0.3666177511740999, 'rouge2': 0.12221451889384416, 'rougeL': 0.24071707950513577, 'rougeLsum': 0.3027578854983405}, 'average_rouge_ref': {'rouge1': 0.41858149947701984, 'rouge2': 0.19592063246471425, 'rougeL': 0.2939798241481364, 'rougeLsum': 0.35365387150961747}, 'average_bleu_pruned': {'bleu': 0.0897859833319244, 'precisions': [0.3762541806020067, 0.12363945578231293, 0.05397923875432526, 0.025880281690140845], 'brevity_penalty': 1.0, 'length_ratio': 1.0599078341013826, 'translation_length': 5980, 'reference_length': 5642}, 'average_bleu_ref': {'bleu': 0.15434915398574175, 'precisions': [0.3787956767884714, 0.1750521376433785, 0.1089540412044374, 0.07855995717344753], 'brevity_penalty': 1.0, 'length_ratio': 1.3775257001063452, 'translation_length': 7772, 'reference_length': 5642}}, 'temp 1': {'average_flops_pruned': 83727006586.88, 'average_flops_ref': 129100198615.04, 'average_time_pruned': 1.215048463344574, 'average_time_ref': 1.5024070429801941, 'average_rouge_pruned': {'rouge1': 0.35914025683064255, 'rouge2': 0.12097034523033381, 'rougeL': 0.2368170308294883, 'rougeLsum': 0.29898338118648704}, 'average_rouge_ref': {'rouge1': 0.41858149947701984, 'rouge2': 0.19592063246471425, 'rougeL': 0.2939798241481364, 'rougeLsum': 0.35365387150961747}, 'average_bleu_pruned': {'bleu': 0.09178706246846255, 'precisions': [0.37506439979392064, 0.12598287611392625, 0.055308554152587584, 0.027159152634437807], 'brevity_penalty': 1.0, 'length_ratio': 1.032080822403403, 'translation_length': 5823, 'reference_length': 5642}, 'average_bleu_ref': {'bleu': 0.15434915398574175, 'precisions': [0.3787956767884714, 0.1750521376433785, 0.1089540412044374, 0.07855995717344753], 'brevity_penalty': 1.0, 'length_ratio': 1.3775257001063452, 'translation_length': 7772, 'reference_length': 5642}}}
refined_temp_scaling_test = {'temp 0.4': {'average_flops_pruned': 85887301038.08, 'average_flops_ref': 132405613015.04, 'average_time_pruned': 1.1726177787780763, 'average_time_ref': 1.4541399097442627, 'average_rouge_pruned': {'rouge1': 0.35082641534606274, 'rouge2': 0.1158911946158472, 'rougeL': 0.22779762991855185, 'rougeLsum': 0.29054450089346195}, 'average_rouge_ref': {'rouge1': 0.4264887716838738, 'rouge2': 0.20522207413070193, 'rougeL': 0.2924732771376576, 'rougeLsum': 0.361663711070105}, 'average_bleu_pruned': {'bleu': 0.07747625453341385, 'precisions': [0.3745686680469289, 0.11973314606741572, 0.04681915654038599, 0.020560407569141195], 'brevity_penalty': 0.9558028713768373, 'length_ratio': 0.9567514031033344, 'translation_length': 5796, 'reference_length': 6058}, 'average_bleu_ref': {'bleu': 0.15829176242873433, 'precisions': [0.3895937459951301, 0.18616123588212385, 0.11140339339734315, 0.07770225243236038], 'brevity_penalty': 1.0, 'length_ratio': 1.2880488610102343, 'translation_length': 7803, 'reference_length': 6058}}, 'temp 0.5': {'average_flops_pruned': 85887301038.08, 'average_flops_ref': 132405613015.04, 'average_time_pruned': 1.1775490355491638, 'average_time_ref': 1.4534434247016907, 'average_rouge_pruned': {'rouge1': 0.35760421779576357, 'rouge2': 0.11984819998067078, 'rougeL': 0.22925806710589194, 'rougeLsum': 0.29655542318189143}, 'average_rouge_ref': {'rouge1': 0.4264887716838738, 'rouge2': 0.20522207413070193, 'rougeL': 0.2924732771376576, 'rougeLsum': 0.361663711070105}, 'average_bleu_pruned': {'bleu': 0.08306167733191114, 'precisions': [0.3790973056461301, 0.12327571154181945, 0.05153723120668207, 0.02315903745250588], 'brevity_penalty': 0.961132462793442, 'length_ratio': 0.9618686034995048, 'translation_length': 5827, 'reference_length': 6058}, 'average_bleu_ref': {'bleu': 0.15829176242873433, 'precisions': [0.3895937459951301, 0.18616123588212385, 0.11140339339734315, 0.07770225243236038], 'brevity_penalty': 1.0, 'length_ratio': 1.2880488610102343, 'translation_length': 7803, 'reference_length': 6058}}, 'temp 0.6': {'average_flops_pruned': 85887301038.08, 'average_flops_ref': 132405613015.04, 'average_time_pruned': 1.1993331909179688, 'average_time_ref': 1.4523380160331727, 'average_rouge_pruned': {'rouge1': 0.3567236043252965, 'rouge2': 0.11761634001607953, 'rougeL': 0.22900849831785697, 'rougeLsum': 0.29446326892271957}, 'average_rouge_ref': {'rouge1': 0.4264887716838738, 'rouge2': 0.20522207413070193, 'rougeL': 0.2924732771376576, 'rougeLsum': 0.361663711070105}, 'average_bleu_pruned': {'bleu': 0.08262988340264842, 'precisions': [0.3776809651474531, 0.12116564417177914, 0.04906380027739251, 0.02205363443895554], 'brevity_penalty': 0.9850327112659389, 'length_ratio': 0.9851436117530538, 'translation_length': 5968, 'reference_length': 6058}, 'average_bleu_ref': {'bleu': 0.15829176242873433, 'precisions': [0.3895937459951301, 0.18616123588212385, 0.11140339339734315, 0.07770225243236038], 'brevity_penalty': 1.0, 'length_ratio': 1.2880488610102343, 'translation_length': 7803, 'reference_length': 6058}}, 'temp 0.7': {'average_flops_pruned': 85887301038.08, 'average_flops_ref': 132405613015.04, 'average_time_pruned': 1.175814893245697, 'average_time_ref': 1.4484929704666138, 'average_rouge_pruned': {'rouge1': 0.354791306446387, 'rouge2': 0.11897495910138381, 'rougeL': 0.22434524066297748, 'rougeLsum': 0.29383327346781635}, 'average_rouge_ref': {'rouge1': 0.4264887716838738, 'rouge2': 0.20522207413070193, 'rougeL': 0.2924732771376576, 'rougeLsum': 0.361663711070105}, 'average_bleu_pruned': {'bleu': 0.07831860080080214, 'precisions': [0.37512829284981186, 0.12269404803341455, 0.04852993269571378, 0.019473494410385865], 'brevity_penalty': 0.964385553841406, 'length_ratio': 0.9650049521294156, 'translation_length': 5846, 'reference_length': 6058}, 'average_bleu_ref': {'bleu': 0.15829176242873433, 'precisions': [0.3895937459951301, 0.18616123588212385, 0.11140339339734315, 0.07770225243236038], 'brevity_penalty': 1.0, 'length_ratio': 1.2880488610102343, 'translation_length': 7803, 'reference_length': 6058}}, 'temp 0.8': {'average_flops_pruned': 85887301038.08, 'average_flops_ref': 132405613015.04, 'average_time_pruned': 1.1983295059204102, 'average_time_ref': 1.4647394251823425, 'average_rouge_pruned': {'rouge1': 0.3558220313561341, 'rouge2': 0.12032008623616575, 'rougeL': 0.22523337114302305, 'rougeLsum': 0.29605631221630224}, 'average_rouge_ref': {'rouge1': 0.4264887716838738, 'rouge2': 0.20522207413070193, 'rougeL': 0.2924732771376576, 'rougeLsum': 0.361663711070105}, 'average_bleu_pruned': {'bleu': 0.08112941041981954, 'precisions': [0.37436591139668585, 0.12280701754385964, 0.049002450122506126, 0.02119700748129676], 'brevity_penalty': 0.9759450431842558, 'length_ratio': 0.9762297788048862, 'translation_length': 5914, 'reference_length': 6058}, 'average_bleu_ref': {'bleu': 0.15829176242873433, 'precisions': [0.3895937459951301, 0.18616123588212385, 0.11140339339734315, 0.07770225243236038], 'brevity_penalty': 1.0, 'length_ratio': 1.2880488610102343, 'translation_length': 7803, 'reference_length': 6058}}, 'temp 0.9': {'average_flops_pruned': 85887301038.08, 'average_flops_ref': 132405613015.04, 'average_time_pruned': 1.1830370211601258, 'average_time_ref': 1.4507196760177612, 'average_rouge_pruned': {'rouge1': 0.3545263305875619, 'rouge2': 0.11975973924494876, 'rougeL': 0.2292437922817357, 'rougeLsum': 0.29638684463256537}, 'average_rouge_ref': {'rouge1': 0.4264887716838738, 'rouge2': 0.20522207413070193, 'rougeL': 0.2924732771376576, 'rougeLsum': 0.361663711070105}, 'average_bleu_pruned': {'bleu': 0.08339421683084593, 'precisions': [0.37633316404266126, 0.12639917341140003, 0.0513404590853338, 0.021936864633493848], 'brevity_penalty': 0.9747610728668653, 'length_ratio': 0.9750742819412347, 'translation_length': 5907, 'reference_length': 6058}, 'average_bleu_ref': {'bleu': 0.15829176242873433, 'precisions': [0.3895937459951301, 0.18616123588212385, 0.11140339339734315, 0.07770225243236038], 'brevity_penalty': 1.0, 'length_ratio': 1.2880488610102343, 'translation_length': 7803, 'reference_length': 6058}}, 'temp 1': {'average_flops_pruned': 85887301038.08, 'average_flops_ref': 132405613015.04, 'average_time_pruned': 1.176953499317169, 'average_time_ref': 1.4388396763801574, 'average_rouge_pruned': {'rouge1': 0.3609637252379362, 'rouge2': 0.12382181300384529, 'rougeL': 0.2316664294354416, 'rougeLsum': 0.30035746014630677}, 'average_rouge_ref': {'rouge1': 0.4264887716838738, 'rouge2': 0.20522207413070193, 'rougeL': 0.2924732771376576, 'rougeLsum': 0.361663711070105}, 'average_bleu_pruned': {'bleu': 0.08321561827839002, 'precisions': [0.3778337531486146, 0.12485055508112725, 0.050912250217202436, 0.021396993810786913], 'brevity_penalty': 0.9828523342614462, 'length_ratio': 0.9829976890062727, 'translation_length': 5955, 'reference_length': 6058}, 'average_bleu_ref': {'bleu': 0.15829176242873433, 'precisions': [0.3895937459951301, 0.18616123588212385, 0.11140339339734315, 0.07770225243236038], 'brevity_penalty': 1.0, 'length_ratio': 1.2880488610102343, 'translation_length': 7803, 'reference_length': 6058}}}


import matplotlib.pyplot as plt
import numpy as np

result_list = results_layer_merge_weights

prune_ratios = sorted(result_list.keys())
average_flops_pruned = []
average_flops_ref = []
average_time_pruned = []
average_time_ref = []
average_rouge1_pruned = []
average_rouge1_ref = []
average_rouge2_pruned = []
average_rouge2_ref = []
average_rougeL_pruned = []
average_rougeL_ref = []
average_bleu_pruned = []
average_bleu_ref = []
for ratio in prune_ratios:
    result = result_list[ratio]
    average_flops_pruned.append(result['average_flops_pruned'])
    average_flops_ref.append(result['average_flops_ref'])
    average_time_pruned.append(result['average_time_pruned'])
    average_time_ref.append(result['average_time_ref'])
    average_rouge1_pruned.append(result['average_rouge_pruned']['rouge1'])
    average_rouge1_ref.append(result['average_rouge_ref']['rouge1'])
    average_rouge2_pruned.append(result['average_rouge_pruned']['rouge2'])
    average_rouge2_ref.append(result['average_rouge_ref']['rouge2'])
    average_rougeL_pruned.append(result['average_rouge_pruned']['rougeL'])
    average_rougeL_ref.append(result['average_rouge_ref']['rougeL'])
    average_bleu_pruned.append(result['average_bleu_pruned']['bleu'])
    average_bleu_ref.append(result['average_bleu_ref']['bleu'])

prune_ratios = np.array(prune_ratios)
average_flops_pruned = np.array(average_flops_pruned)
average_flops_ref = np.array(average_flops_ref)
average_time_pruned = np.array(average_time_pruned)
average_time_ref = np.array(average_time_ref)
average_rouge1_pruned = np.array(average_rouge1_pruned)
average_rouge1_ref = np.array(average_rouge1_ref)
average_rouge2_pruned = np.array(average_rouge2_pruned)
average_rouge2_ref = np.array(average_rouge2_ref)
average_rougeL_pruned = np.array(average_rougeL_pruned)
average_rougeL_ref = np.array(average_rougeL_ref)
average_bleu_pruned = np.array(average_bleu_pruned)
average_bleu_ref = np.array(average_bleu_ref)

plt.figure(figsize=(8, 12))  # Adjust the figure size for vertical layout

# FLOPs Subplot
plt.subplot(3, 1, 1)
plt.plot(prune_ratios, average_flops_pruned / 1e9, marker='o', label='Pruned Model FLOPs')
plt.axhline(y=average_flops_ref[0] / 1e9, color='r', linestyle='--', label='Reference Model FLOPs')
plt.xlabel('Relative Weight of Non-Anchor Tokens')
plt.ylabel('Average FLOPs (in billions)')
plt.title('Average FLOPs vs Non-Anchor Weight')
plt.legend(loc='best', prop={'size': 10})
plt.grid(True)

# Inference Time Subplot
plt.subplot(3, 1, 2)
plt.plot(prune_ratios, average_time_pruned, marker='o', label='Pruned Model Time')
plt.axhline(y=average_time_ref[0], color='r', linestyle='--', label='Reference Model Time')
plt.xlabel('Relative Weight of Non-Anchor Tokens')
plt.ylabel('Average Inference Time (seconds)')
plt.title('Average Inference Time vs Non-Anchor Weight')
plt.legend(loc='best', prop={'size': 10})
plt.grid(True)

# ROUGE Subplot
plt.subplot(3, 1, 3)
plt.plot(prune_ratios, average_rouge1_pruned, color='b', marker='o', label='Pruned ROUGE-1')
plt.plot(prune_ratios, average_rouge2_pruned, color='r', marker='s', label='Pruned ROUGE-2')
plt.plot(prune_ratios, average_rougeL_pruned, color='g', marker='^', label='Pruned ROUGE-L')

plt.axhline(y=average_rouge1_ref[0], color='b', linestyle='--', label='Reference ROUGE-1')
plt.axhline(y=average_rouge2_ref[0], color='r', linestyle='--', label='Reference ROUGE-2')
plt.axhline(y=average_rougeL_ref[0], color='g', linestyle='--', label='Reference ROUGE-L')

plt.xlabel('Relative Weight of Non-Anchor Tokens')
plt.ylabel('ROUGE Scores')
plt.title('ROUGE Scores vs Non-Anchor Weight')
plt.legend(bbox_to_anchor=(1.05, 1), prop={'size': 10})
plt.grid(True)

plt.tight_layout()
plt.savefig("merge_weight_vertical.png", dpi=800)
plt.show()